---
// ✅ CORREGIDO: Usamos '@' para importar y pasamos 'lang' a todos los componentes
// que lo necesitan para mostrar el contenido traducido.

import BaseLayout from '@/components/layout/BaseLayout.astro';
import Navbar from '@/components/shared/Navbar';
import Hero from '@/components/landing/Hero.astro';
import About from '@/components/landing/About.astro';
import Skills from '@/components/landing/Skills.astro';
import Qualification from '@/components/landing/Qualification.astro';
import Projects from '@/components/landing/Projects.astro';
import Contact from '@/components/landing/Contact.astro';
import Footer from '@/components/shared/Footer.astro';

import { ui, defaultLang } from '@/i18n/ui';

export function getStaticPaths() {
  return [
    { params: { lang: 'es' } },
    { params: { lang: 'en' } },
  ];
}

const { lang } = Astro.params;

// Helper de traducción
const t = (key: string) => {
    // @ts-ignore
    return ui[lang]?.[key] || ui[defaultLang][key];
}

// ✅ PREPARAMOS LOS DATOS PARA EL NAVBAR AQUÍ (SERVER-SIDE)
const navLabels = {
    home: t('nav.home'),
    about: t('nav.about'),
    skills: t('nav.skills'),
    experience: t('nav.experience'),
    projects: t('nav.projects'),
};
---

<BaseLayout title="Juanpe | Full Stack Portfolio" lang={lang}>
  
  <!-- Pasamos navLabels en lugar de t -->
  <Navbar client:load lang={lang} labels={navLabels} />
  
  <main>
    <Hero t={t} lang={lang} />
    
    <!-- ✅ CORREGIDO: Pasamos 'lang={lang}' a About -->
    <About t={t} lang={lang} />
    
    <Skills t={t} />
    
    <!-- ✅ CORREGIDO: Pasamos 'lang={lang}' a Qualification -->
    <Qualification t={t} lang={lang} />
    
    <!-- ✅ CORREGIDO: Pasamos 'lang={lang}' a Projects -->
    <Projects t={t} lang={lang} />
    
    <Contact t={t} />
  </main>
  
  <Footer t={t} lang={lang} />

</BaseLayout>