---
import BaseLayout from '../../components/layout/BaseLayout.astro';
import { ui, defaultLang } from '../../i18n/ui';

// 1. Get the current language from the URL params
export function getStaticPaths() {
  return [
    { params: { lang: 'es' } },
    { params: { lang: 'en' } },
  ];
}

const { lang } = Astro.params;

// 2. Get translations based on current language
const t = (key: keyof typeof ui.es) => {
    return ui[lang as keyof typeof ui][key] || ui[defaultLang][key];
}
---

<BaseLayout title={`Portfolio | ${lang === 'es' ? 'Desarrollador' : 'Developer'}`} lang={lang}>
  
  <main class="max-w-5xl mx-auto px-4 py-20">
    
    <section class="text-center space-y-6">
      <span class="inline-block px-3 py-1 text-sm font-medium text-blue-600 bg-blue-100 dark:bg-blue-900/30 dark:text-blue-400 rounded-full">
        {t('hero.badge')}
      </span>
      
      <h1 class="text-5xl md:text-7xl font-bold tracking-tight">
        Juanpe <span class="text-blue-600">Developer</span>
      </h1>
      
      <p class="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
        Full Stack Developer & QA Engineer.
      </p>

      <div class="flex gap-4 justify-center mt-8">
        <a href={`/${lang}/contact`} class="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition">
            {t('btn.contact')}
        </a>
        <button class="px-6 py-3 bg-slate-200 dark:bg-slate-800 rounded-lg font-medium hover:bg-slate-300 dark:hover:bg-slate-700 transition">
            {t('btn.downloadCV')}
        </button>
      </div>

      <div class="mt-12 p-4 border border-slate-200 dark:border-slate-800 rounded-xl inline-block">
        <p class="text-sm mb-2 text-slate-500">Language / Idioma:</p>
        <div class="flex gap-4">
            <a href="/es" class={`font-bold ${lang === 'es' ? 'text-blue-500' : 'text-slate-400'}`}>ES</a>
            <span class="text-slate-600">|</span>
            <a href="/en" class={`font-bold ${lang === 'en' ? 'text-blue-500' : 'text-slate-400'}`}>EN</a>
        </div>
      </div>
      
    </section>

  </main>
</BaseLayout>